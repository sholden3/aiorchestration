{
  "rule_name": "Archival Detection Rules",
  "version": "1.0",
  "created": "2025-01-28",
  "author": "Alex Novak & Dr. Sarah Chen",
  "description": "Detect when files should be archived instead of creating new versions",
  
  "archival_patterns": {
    "version_suffixes": {
      "patterns": ["_v2", "_v3", "_new", "_updated", "_enhanced", "_fixed"],
      "message": "Creating versioned files detected. Use archival procedure instead.",
      "severity": "error",
      "suggestion": "Archive the original file and update in place"
    },
    
    "duplicate_base_names": {
      "description": "Detect files with same base name but different suffixes",
      "examples": [
        "smart_rules.py and smart_rules_v2.py",
        "cache_manager.py and cache_manager_enhanced.py"
      ],
      "severity": "error",
      "action": "Block commit and require archival"
    },
    
    "replacement_indicators": {
      "commit_patterns": [
        "replacing",
        "new version of",
        "updated version",
        "enhanced version",
        "refactored"
      ],
      "requires": "Check if original file still exists alongside new file"
    }
  },
  
  "enforcement_rules": {
    "pre_commit_checks": [
      {
        "check": "version_suffix_detection",
        "action": "scan_new_files_for_version_patterns",
        "on_violation": "block_commit_with_archival_instructions"
      },
      {
        "check": "duplicate_detection",
        "action": "compare_new_files_against_existing",
        "on_violation": "suggest_archival_procedure"
      }
    ],
    
    "archival_requirements": {
      "must_have_in_archive": [
        "README.md with justification",
        "Original file with proper naming",
        "Rollback instructions"
      ],
      "naming_pattern": "{date}_{original_name}_v{version}_{reason}.{ext}",
      "approval_required": ["sarah_chen", "alex_novak"]
    }
  },
  
  "exemptions": {
    "allowed_duplicates": [
      "test files (test_*.py alongside *.py)",
      "mock files (mock_*.py alongside *.py)",
      "backup files in archive/ directory"
    ]
  }
}
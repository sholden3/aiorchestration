// ============================================
// GLOBAL STYLES - Using Design Tokens
// ============================================

@import 'styles/variables';
@import 'styles/mixins';

// Override Angular Material's dark theme defaults
:root {
  --mat-app-background-color: #{$color-background};
  --mat-app-text-color: #{$color-text-primary};
  --mat-option-label-text-color: #{$color-text-primary};
  --mat-optgroup-label-text-color: #{$color-text-primary};
  --mdc-elevated-card-container-color: #{$color-surface};
  --mdc-outlined-card-container-color: #{$color-surface};
}

// Base Reset
html, body { 
  height: 100%; 
  margin: 0;
  padding: 0;
}

body { 
  font-family: $font-family-sans;
  background-color: $color-background;
  color: $color-text-primary;
  font-size: $font-size-base;
  line-height: 1.6;
}

* {
  box-sizing: border-box;
}

// Scrollbar styling
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: $color-border;
}

::-webkit-scrollbar-thumb {
  background: $color-text-secondary;
  border-radius: $radius-sm;
  
  &:hover {
    background: $color-text-primary;
  }
}

// Material Component Overrides
.mat-toolbar {
  &.top-nav {
    @include gradient-primary;
  }
}

.mat-card {
  @include card;
}

// Form Field Overrides - Fix white-on-white issues
.mat-mdc-form-field {
  .mat-mdc-text-field-wrapper {
    background-color: $color-surface !important;
  }
  
  .mdc-text-field--outlined:not(.mdc-text-field--disabled) {
    .mdc-notched-outline__leading,
    .mdc-notched-outline__notch,
    .mdc-notched-outline__trailing {
      border-color: $color-border !important;
    }
    
    &:hover {
      .mdc-notched-outline__leading,
      .mdc-notched-outline__notch,
      .mdc-notched-outline__trailing {
        border-color: $color-text-secondary !important;
      }
    }
    
    &.mdc-text-field--focused {
      .mdc-notched-outline__leading,
      .mdc-notched-outline__notch,
      .mdc-notched-outline__trailing {
        border-color: $color-primary !important;
      }
    }
  }
  
  .mat-mdc-form-field-focus-overlay {
    background-color: transparent !important;
  }
  
  .mdc-text-field__input {
    color: $color-text-primary !important;
    caret-color: $color-primary !important;
  }
  
  .mdc-floating-label {
    color: $color-text-secondary !important;
  }
  
  .mat-mdc-form-field-hint,
  .mat-mdc-form-field-error {
    color: $color-text-secondary !important;
  }
  
  .mat-mdc-form-field-subscript-wrapper {
    .mat-error {
      color: $color-error !important;
    }
  }
}

// Select dropdown fixes
.mat-mdc-select {
  .mat-mdc-select-value {
    color: $color-text-primary !important;
  }
  
  .mat-mdc-select-arrow {
    color: $color-text-secondary !important;
  }
  
  &.mat-mdc-select-disabled {
    .mat-mdc-select-value,
    .mat-mdc-select-arrow {
      color: $color-text-muted !important;
    }
  }
}

.mat-mdc-select-panel {
  background: $color-surface !important;
  
  .mat-mdc-option {
    color: $color-text-primary !important;
    
    &:hover:not(.mat-mdc-option-disabled) {
      background: $color-hover !important;
    }
    
    &.mat-mdc-option-selected:not(.mat-mdc-option-disabled) {
      background: $color-active !important;
    }
  }
}

// Input fields in filled variant
.mat-mdc-form-field.mat-form-field-appearance-fill {
  .mat-mdc-text-field-wrapper {
    background-color: $color-background !important;
  }
  
  .mat-mdc-form-field-focus-overlay {
    background-color: transparent !important;
  }
}

// Button overrides for better visibility
.mat-mdc-button,
.mat-mdc-raised-button,
.mat-mdc-flat-button,
.mat-mdc-stroked-button,
.mat-mdc-icon-button {
  &:not([disabled]) {
    color: $color-text-primary !important;
    
    &.mat-primary {
      color: $color-primary !important;
    }
    
    &.mat-accent {
      color: $color-secondary !important;
    }
    
    &.mat-warn {
      color: $color-error !important;
    }
  }
  
  &[disabled] {
    color: $color-text-muted !important;
  }
}

.mat-mdc-raised-button,
.mat-mdc-flat-button {
  &:not([disabled]) {
    &.mat-primary {
      background-color: $color-primary !important;
      color: $color-dark-text-primary !important;
    }
    
    &.mat-accent {
      background-color: $color-secondary !important;
      color: $color-dark-text-primary !important;
    }
    
    &.mat-warn {
      background-color: $color-error !important;
      color: $color-dark-text-primary !important;
    }
  }
}

// Icon button specific fixes
.mat-mdc-icon-button {
  mat-icon {
    color: inherit;
  }
  
  &:hover:not([disabled]) {
    background-color: $color-hover;
  }
}

// Chip styling for better visibility
.mat-mdc-chip {
  background-color: $color-background !important;
  color: $color-text-primary !important;
  border: $border-width solid $color-border !important;
  
  &.mat-mdc-chip-selected {
    background-color: $color-primary !important;
    color: $color-dark-text-primary !important;
    border-color: $color-primary !important;
  }
  
  &.mat-mdc-chip-disabled {
    opacity: 0.6;
  }
  
  .mat-mdc-chip-remove {
    color: $color-text-secondary !important;
    opacity: 0.7;
    
    &:hover {
      opacity: 1;
      color: $color-error !important;
    }
  }
}

.mat-tab-group {
  background-color: $color-surface;
  color: $color-text-primary;
}

.mat-tab-label {
  color: $color-text-primary;
  
  &.mat-tab-label-active {
    color: $color-primary;
  }
}

// Navigation - Using design tokens
.mat-nav-list .mat-list-item {
  @include nav-item;
}

.mat-list-item-content {
  color: inherit;
}

// Ensure Material icons inherit color
.mat-icon {
  color: currentColor;
}

// Terminal Section - Dark theme
.terminal-section {
  @include dark-theme;
  
  * {
    background-color: inherit;
    color: inherit;
  }
  
  .terminal-prompt {
    color: $terminal-prompt;
  }
}

/* Utility classes */
.container {
  padding: 16px;
  max-width: 1400px;
  margin: 0 auto;
}

.mt-1 { margin-top: 8px; }
.mt-2 { margin-top: 16px; }
.mt-3 { margin-top: 24px; }
.mb-1 { margin-bottom: 8px; }
.mb-2 { margin-bottom: 16px; }
.mb-3 { margin-bottom: 24px; }